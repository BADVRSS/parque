<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interactivo - Parque del Pueblo Neza</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
        }

        header {
            background-color: #2e7d32;
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        h1 {
            margin-bottom: 1rem;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .tab-btn {
            background-color: #1b5e20;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .tab-btn:hover {
            background-color: #388e3c;
        }

        .tab-btn.active {
            background-color: #4caf50;
        }

        main {
            max-width: 1200px;
            margin: 1rem auto;
            padding: 1rem;
        }

        .tab-content {
            display: none;
            background-color: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .tab-content.active {
            display: block;
        }

        .map-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        @media (min-width: 768px) {
            .map-container {
                flex-direction: row;
            }
        }

        canvas {
            background-color: #e8f5e9;
            border: 2px solid #81c784;
            border-radius: 8px;
            max-width: 100%;
            height: auto;
        }

        .info-panel {
            background-color: #f1f8e9;
            border: 1px solid #c5e1a5;
            border-radius: 8px;
            padding: 1rem;
            min-width: 250px;
            max-width: 100%;
            position: relative;
        }

        .info-panel h3 {
            color: #33691e;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #aed581;
            padding-bottom: 0.5rem;
        }

        .info-panel .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #33691e;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .list-container {
            margin-top: 1rem;
        }

        .facilities-list {
            list-style: none;
            max-height: 500px;
            overflow-y: auto;
        }

        .facilities-list li {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border-bottom: 1px solid #e0e0e0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .facilities-list li:hover {
            background-color: #f1f8e9;
        }

        .facilities-list .number {
            background-color: #4caf50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-weight: bold;
        }

        .animals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            max-height: 600px;
            overflow-y: auto;
        }

        .animal-card {
            background-color: #f1f8e9;
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .animal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .animal-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .animal-icon {
            font-size: 2.5rem;
            margin-right: 1rem;
        }

        .animal-info {
            flex: 1;
        }

        .animal-card h3 {
            font-size: 1.2rem;
            color: #33691e;
            margin-bottom: 0.25rem;
        }

        .animal-card p {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.5rem;
        }

        .animal-details {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .animal-detail {
            background-color: #e8f5e9;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            color: #2e7d32;
        }

        .animal-number {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #4caf50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .conservation-status {
            margin-top: 0.5rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            background-color: #e8f5e9;
            color: #2e7d32;
            display: inline-block;
        }

        footer {
            background-color: #2e7d32;
            color: white;
            text-align: center;
            padding: 1rem;
            margin-top: 2rem;
        }

        .highlight {
            background-color: #c8e6c9;
        }

        .zone-tooltip {
            position: absolute;
            background-color: rgba(46, 125, 50, 0.9);
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
            pointer-events: none;
            z-index: 100;
            max-width: 200px;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f1f8e9;
            border-radius: 8px;
            border: 1px solid #c5e1a5;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 1rem;
            margin-bottom: 0.5rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .search-box {
            margin-bottom: 1rem;
            padding: 0.5rem;
            width: 100%;
            border: 1px solid #c5e1a5;
            border-radius: 4px;
        }

        .facility-card {
            background-color: #f1f8e9;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 5px solid #4caf50;
        }

        .facility-card h3 {
            color: #33691e;
            margin-bottom: 0.5rem;
        }

        .facility-card p {
            color: #555;
            margin-bottom: 0.5rem;
        }

        .facility-type {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background-color: #e8f5e9;
            border-radius: 4px;
            font-size: 0.8rem;
            color: #2e7d32;
            margin-top: 0.5rem;
        }

        .info-section {
            margin-top: 1rem;
            border-top: 1px solid #e0e0e0;
            padding-top: 1rem;
        }

        .info-section h4 {
            color: #33691e;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .info-box {
            background-color: #e8f5e9;
            padding: 0.5rem;
            border-radius: 4px;
        }

        .info-box h4 {
            color: #33691e;
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>Parque del Pueblo - Nezahualc칩yotl</h1>
        <div class="tabs">
            <button class="tab-btn active" data-tab="mapa">Mapa</button>
            <button class="tab-btn" data-tab="instalaciones">Instalaciones</button>
            <button class="tab-btn" data-tab="animales">Animales</button>
        </div>
    </header>

    <main>
        <div class="tab-content active" id="mapa">
            <div class="map-container">
                <div>
                    <canvas id="parkMap" width="800" height="600"></canvas>
                    <div class="legend" id="mapLegend">
                        <h3>Leyenda</h3>
                        <div id="legendItems" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;"></div>
                    </div>
                </div>
                <div id="infoPanel" class="info-panel">
                    <h3>Informaci칩n</h3>
                    <p>Selecciona una zona del parque para ver detalles</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="instalaciones">
            <h2>Instalaciones del Parque</h2>
            <input type="text" class="search-box" id="facilitySearch" placeholder="Buscar instalaci칩n...">
            <div class="list-container">
                <ul class="facilities-list" id="facilitiesList">
                    <!-- Se llenar치 din치micamente -->
                </ul>
            </div>
        </div>

        <div class="tab-content" id="animales">
            <h2>Animales del Parque</h2>
            <input type="text" class="search-box" id="animalSearch" placeholder="Buscar animal...">
            <div class="list-container">
                <div class="animals-grid" id="animalsGrid">
                    <!-- Se llenar치 din치micamente -->
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>Mapa Interactivo del Parque del Pueblo - Nezahualc칩yotl 춸 2025</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Manejo de pesta침as
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Desactivar todas las pesta침as
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Activar la pesta침a seleccionada
                    button.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Configuraci칩n del canvas para el mapa
            const canvas = document.getElementById('parkMap');
            const ctx = canvas.getContext('2d');
            const infoPanel = document.getElementById('infoPanel');
            const facilitiesList = document.getElementById('facilitiesList');
            const animalsGrid = document.getElementById('animalsGrid');
            const legendItems = document.getElementById('legendItems');
            
            // Definir instalaciones del parque
            const parkFacilities = [
                { id: "A", name: "Entrada Av. San Esteban", x: 150, y: 550, radius: 15, color: "#e53935", type: "acceso", 
                  description: "Entrada principal al parque ubicada sobre la Avenida San Esteban. Cuenta con taquillas, m칩dulo de informaci칩n y control de acceso." },
                
                { id: "B", name: "Entrada Av. Linda Vista", x: 650, y: 550, radius: 15, color: "#e53935", type: "acceso", 
                  description: "Entrada secundaria ubicada sobre la Avenida Linda Vista. Facilita el acceso desde la zona este de la ciudad." },
                
                { id: "C", name: "Cuarentena", x: 100, y: 150, radius: 15, color: "#607d8b", type: "servicio", 
                  description: "츼rea restringida donde los animales reci칠n llegados o enfermos son mantenidos en aislamiento para observaci칩n y tratamiento m칠dico." },
                
                { id: "D", name: "Ba침os", x: 250, y: 500, radius: 15, color: "#607d8b", type: "servicio", 
                  description: "Servicios sanitarios p칰blicos con instalaciones para personas con discapacidad. Incluye cambiadores para beb칠s." },
                
                { id: "E", name: "Teatro", x: 350, y: 450, radius: 15, color: "#9c27b0", type: "recreacion", 
                  description: "Espacio para presentaciones educativas sobre fauna y flora, con capacidad para 200 personas. Se realizan shows diarios sobre conservaci칩n." },
                
                { id: "F", name: "Cl칤nica", x: 200, y: 200, radius: 15, color: "#f44336", type: "servicio", 
                  description: "Centro m칠dico veterinario equipado para atender emergencias y realizar procedimientos quir칰rgicos a los animales del parque." },
                
                { id: "G", name: "Oficinas", x: 300, y: 150, radius: 15, color: "#607d8b", type: "servicio", 
                  description: "츼rea administrativa donde se gestionan las operaciones diarias del parque, recursos humanos y programas de conservaci칩n." },
                
                { id: "H", name: "Cocina", x: 400, y: 150, radius: 15, color: "#795548", type: "servicio", 
                  description: "Instalaci칩n donde se preparan las dietas especializadas para cada especie animal del parque, siguiendo estrictos protocolos nutricionales." },
                
                { id: "I", name: "Kiosco", x: 450, y: 350, radius: 15, color: "#795548", type: "servicio", 
                  description: "Punto de venta de alimentos, bebidas y recuerdos. Ofrece opciones de comida r치pida y refrigerios para los visitantes." },
                
                { id: "J", name: "Nongo (츼rea de Fiestas)", x: 550, y: 400, radius: 15, color: "#ff9800", type: "recreacion", 
                  description: "Espacio designado para celebraciones y eventos privados. Cuenta con mesas, sillas y 치rea de juegos para ni침os." },
                
                { id: "K", name: "Acceso a personal", x: 700, y: 150, radius: 15, color: "#607d8b", type: "servicio", 
                  description: "Entrada exclusiva para empleados y personal autorizado. Cuenta con sistema de control de acceso y seguridad." },
                
                { id: "L", name: "Acceso Servicios", x: 750, y: 250, radius: 15, color: "#607d8b", type: "servicio", 
                  description: "Entrada para veh칤culos de servicio, proveedores y mantenimiento. Permite el ingreso de suministros y equipamiento." },
                
                { id: "M", name: "Museo", x: 500, y: 200, radius: 15, color: "#9c27b0", type: "recreacion", 
                  description: "Exhibici칩n educativa sobre biodiversidad, conservaci칩n y la historia natural de las especies del parque. Incluye muestras interactivas." },
                
                { id: "N", name: "Acceso Rampa", x: 400, y: 550, radius: 15, color: "#e53935", type: "acceso", 
                  description: "Entrada con accesibilidad universal mediante rampa para personas con movilidad reducida, adultos mayores y familias con carriolas." },
                
                { id: "O", name: "Isla", x: 450, y: 300, radius: 25, color: "#1e88e5", type: "agua", 
                  description: "Formaci칩n natural en medio del lago central. Sirve como h치bitat para algunas especies de aves y como punto focal paisaj칤stico." }
            ];
            
            // Definir animales del parque con informaci칩n detallada
            const parkAnimals = [
                { 
                    id: 1, 
                    name: "Gamo", 
                    icon: "游붋", 
                    x: 150, y: 480,
                    species: "FALLOW",
                    scientificName: "Dama dama",
                    habitat: "Bosques caducifolios y praderas",
                    diet: "Herb칤voro (hierbas, hojas, cortezas)",
                    lifespan: "12-16 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje moteado, astas palmeadas en machos, peso de 40-80 kg",
                    description: "El gamo es un c칠rvido de tama침o mediano con un caracter칤stico pelaje moteado. Los machos desarrollan astas palmeadas que mudan anualmente. Son animales gregarios que viven en grupos separados por sexos, excepto durante la 칠poca de reproducci칩n."
                },
                { 
                    id: 2, 
                    name: "Coyote", 
                    icon: "游냨", 
                    x: 180, y: 460,
                    species: "Canis latrans",
                    scientificName: "Canis latrans",
                    habitat: "Muy adaptable: desiertos, praderas, bosques y zonas urbanas",
                    diet: "Omn칤voro (peque침os mam칤feros, carro침a, frutas, insectos)",
                    lifespan: "10-14 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje gris치ceo-amarillento, orejas puntiagudas, peso de 9-23 kg",
                    description: "El coyote es un c치nido nativo de Norteam칠rica, altamente adaptable y oportunista. Es m치s peque침o que el lobo pero m치s grande que un zorro. Tiene un aullido distintivo y es principalmente crepuscular. Forma parejas mon칩gamas y ambos padres participan en la crianza de los cachorros."
                },
                { 
                    id: 3, 
                    name: "Guacamaya", 
                    icon: "游붚", 
                    x: 220, y: 500,
                    species: "Ara macao",
                    scientificName: "Ara macao",
                    habitat: "Selvas tropicales y subtropicales de Am칠rica Central y del Sur",
                    diet: "Frug칤voro (frutas, nueces, semillas, n칠ctar)",
                    lifespan: "50-60 a침os",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Plumaje rojo brillante con alas amarillas y azules, pico grande y curvado",
                    description: "La guacamaya roja es una de las aves m치s coloridas del mundo. Posee un plumaje predominantemente rojo con alas tricolores (rojo, amarillo y azul). Es altamente inteligente y social, formando parejas de por vida. Puede imitar sonidos y algunas palabras humanas."
                },
                { 
                    id: 4, 
                    name: "Gamo", 
                    icon: "游붋", 
                    x: 250, y: 450,
                    species: "FALLOW",
                    scientificName: "Dama dama",
                    habitat: "Bosques caducifolios y praderas",
                    diet: "Herb칤voro (hierbas, hojas, cortezas)",
                    lifespan: "12-16 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje moteado, astas palmeadas en machos, peso de 40-80 kg",
                    description: "El gamo es un c칠rvido de tama침o mediano con un caracter칤stico pelaje moteado. Los machos desarrollan astas palmeadas que mudan anualmente. Son animales gregarios que viven en grupos separados por sexos, excepto durante la 칠poca de reproducci칩n."
                },
                { 
                    id: 5, 
                    name: "Lince", 
                    icon: "游낹", 
                    x: 280, y: 480,
                    species: "Lynx rufus",
                    scientificName: "Lynx rufus",
                    habitat: "Bosques, desiertos y monta침as de Norteam칠rica",
                    diet: "Carn칤voro (conejos, roedores, aves, reptiles)",
                    lifespan: "10-15 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Orejas puntiagudas con mechones negros, cola corta, pelaje moteado",
                    description: "El lince rojo es un felino mediano reconocible por sus orejas puntiagudas con mechones negros y su cola corta. Es un cazador solitario y territorial, principalmente activo durante el crep칰sculo y la noche. Tiene excelente visi칩n y audici칩n para detectar presas."
                },
                { 
                    id: 6, 
                    name: "Guacamaya", 
                    icon: "游붚", 
                    x: 320, y: 460,
                    species: "Ara chloropterus",
                    scientificName: "Ara chloropterus",
                    habitat: "Selvas tropicales de Am칠rica del Sur",
                    diet: "Frug칤voro (frutas, nueces, semillas)",
                    lifespan: "50-60 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Plumaje rojo intenso con alas verdes, cara blanca con l칤neas rojas",
                    description: "La guacamaya roja y verde es una de las especies m치s grandes de guacamayas. Tiene un plumaje predominantemente rojo con alas verdes y azules. Su cara tiene piel blanca con peque침as l칤neas de plumas rojas. Es altamente social e inteligente, capaz de imitar sonidos."
                },
                { 
                    id: 7, 
                    name: "Halc칩n", 
                    icon: "游분", 
                    x: 350, y: 430,
                    species: "CARACARA",
                    scientificName: "Caracara plancus",
                    habitat: "Sabanas, pastizales y 치reas abiertas de Am칠rica",
                    diet: "Omn칤voro oportunista (carro침a, peque침os vertebrados, insectos)",
                    lifespan: "15-20 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Cara naranja-rojiza, pico curvado, plumaje negro con pecho blanco",
                    description: "El caracara es un ave rapaz que, a diferencia de otros halcones, pasa mucho tiempo en el suelo buscando alimento. Tiene una cara distintiva de color naranja-rojizo y un pico fuerte. Es oportunista y se alimenta tanto de carro침a como de presas vivas."
                },
                { 
                    id: 8, 
                    name: "Zorro", 
                    icon: "游붉", 
                    x: 380, y: 450,
                    species: "GRIS",
                    scientificName: "Urocyon cinereoargenteus",
                    habitat: "Bosques, matorrales y 치reas monta침osas",
                    diet: "Omn칤voro (peque침os mam칤feros, frutas, insectos)",
                    lifespan: "6-8 a침os en estado salvaje",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje gris plateado, l칤nea negra a lo largo del lomo, cola con punta negra",
                    description: "El zorro gris es 칰nico entre los c치nidos por su habilidad para trepar 치rboles, gracias a sus garras semi-retr치ctiles. Tiene un pelaje gris plateado distintivo con marcas rojizas en cuello y patas. Es principalmente nocturno y crepuscular, y m치s omn칤voro que otros zorros."
                },
                { 
                    id: 9, 
                    name: "Mapache", 
                    icon: "游붛", 
                    x: 410, y: 420,
                    species: "Procyon lotor",
                    scientificName: "Procyon lotor",
                    habitat: "Bosques cercanos a cursos de agua",
                    diet: "Omn칤voro (frutas, nueces, insectos, peque침os vertebrados)",
                    lifespan: "2-3 a침os en estado salvaje",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "M치scara facial negra, cola anillada, manos muy sensibles",
                    description: "Reconocible por su m치scara facial negra y su cola anillada. Tiene manos muy h치biles que usa para manipular alimentos y objetos. Es principalmente nocturno y se ha adaptado bien a entornos urbanos. Su nombre en muchos idiomas hace referencia a su h치bito de 'lavar' su comida antes de comerla."
                },
                { 
                    id: 10, 
                    name: "Hipop칩tamo", 
                    icon: "游붙", 
                    x: 440, y: 450,
                    species: "Hippopotamus amphibius",
                    scientificName: "Hippopotamus amphibius",
                    habitat: "R칤os y lagos africanos",
                    diet: "Herb칤voro (hierbas)",
                    lifespan: "40-50 a침os",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Cuerpo masivo, piel gruesa, mand칤bulas poderosas, peso de 1.5-3 toneladas",
                    description: "A pesar de su apariencia tranquila, es uno de los animales m치s peligrosos de 츼frica. Pasa la mayor parte del d칤a sumergido en el agua para mantenerse fresco y sale por la noche a pastar. Puede abrir su boca en un 치ngulo de 150 grados y sus colmillos pueden alcanzar 50 cm de longitud."
                },
                { 
                    id: 11, 
                    name: "Jirafa", 
                    icon: "游", 
                    x: 470, y: 420,
                    species: "RETICULADA",
                    scientificName: "Giraffa camelopardalis reticulata",
                    habitat: "Sabanas y bosques abiertos del este de 츼frica",
                    diet: "Herb칤voro (hojas de 치rboles, principalmente acacias)",
                    lifespan: "20-25 a침os",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Patr칩n reticulado distintivo, cuello extremadamente largo, altura de 4.5-5.5 metros",
                    description: "La jirafa reticulada es reconocible por su patr칩n de manchas poligonales separadas por l칤neas blancas bien definidas. Es la subespecie m치s alta y elegante de jirafa. Su largo cuello contiene solo 7 v칠rtebras (igual que los humanos) pero mucho m치s alargadas. Posee un sistema cardiovascular especializado para bombear sangre hasta su cerebro."
                },
                { 
                    id: 12, 
                    name: "Nocturnario", 
                    icon: "游불", 
                    x: 500, y: 450,
                    species: "",
                    scientificName: "Varias especies",
                    habitat: "Exhibici칩n de animales nocturnos",
                    diet: "Var칤a seg칰n especies",
                    lifespan: "Var칤a seg칰n especies",
                    conservationStatus: "Var칤a seg칰n especies",
                    characteristics: "Exhibici칩n con iluminaci칩n especial que permite observar animales de h치bitos nocturnos",
                    description: "El nocturnario es una instalaci칩n especializada con iluminaci칩n invertida que permite a los visitantes observar el comportamiento natural de especies nocturnas durante el d칤a. Alberga murci칠lagos, b칰hos, loris, cusc칰s y otros animales adaptados a la vida nocturna."
                },
                { 
                    id: 13, 
                    name: "Avestruz", 
                    icon: "游붝", 
                    x: 530, y: 420,
                    species: "Struthio camelus",
                    scientificName: "Struthio camelus",
                    habitat: "Sabanas y desiertos africanos",
                    diet: "Omn칤voro (plantas, insectos, peque침os vertebrados)",
                    lifespan: "40-45 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Ave m치s grande del mundo, incapaz de volar, patas largas y fuertes, plumaje negro en machos y gris en hembras",
                    description: "El avestruz es el ave m치s grande y pesada del mundo, incapaz de volar pero excelente corredora (hasta 70 km/h). Tiene ojos grandes y largas pesta침as para protegerse del polvo y la arena. Pone los huevos m치s grandes de cualquier ave terrestre, con un peso de hasta 1.5 kg."
                },
                { 
                    id: 14, 
                    name: "Ant칤lope", 
                    icon: "游붋", 
                    x: 560, y: 450,
                    species: "BLACK BUCK",
                    scientificName: "Antilope cervicapra",
                    habitat: "Praderas y bosques abiertos del sur de Asia",
                    diet: "Herb칤voro (hierbas, hojas, brotes)",
                    lifespan: "10-15 a침os",
                    conservationStatus: "Casi amenazado (NT)",
                    characteristics: "Machos con pelaje negro y cuernos en espiral, hembras de color marr칩n claro sin cuernos",
                    description: "El ant칤lope negro o blackbuck es conocido por el marcado dimorfismo sexual: los machos tienen pelaje negro y largos cuernos en espiral, mientras que las hembras son de color marr칩n claro y carecen de cuernos. Es uno de los ant칤lopes m치s r치pidos, capaz de alcanzar velocidades de hasta 80 km/h."
                },
                { 
                    id: 15, 
                    name: "Ant칤lope", 
                    icon: "游붋", 
                    x: 590, y: 420,
                    species: "칌U",
                    scientificName: "Connochaetes taurinus",
                    habitat: "Sabanas y llanuras de 츼frica oriental y meridional",
                    diet: "Herb칤voro (hierbas)",
                    lifespan: "20-25 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Aspecto de bovino con barba y melena, cuernos curvados, color gris azulado",
                    description: "El 침u azul o gnu es conocido por sus migraciones masivas en busca de pastos frescos. Tiene un aspecto que combina caracter칤sticas de bovino, ant칤lope y caballo. Forma grandes manadas y es presa habitual de grandes depredadores como leones y cocodrilos durante sus migraciones al cruzar r칤os."
                },
                { 
                    id: 16, 
                    name: "Aves", 
                    icon: "游붚", 
                    x: 620, y: 450,
                    species: "MEXICANAS",
                    scientificName: "Varias especies",
                    habitat: "Diversos ecosistemas mexicanos",
                    diet: "Var칤a seg칰n especies",
                    lifespan: "Var칤a seg칰n especies",
                    conservationStatus: "Var칤a seg칰n especies",
                    characteristics: "Colecci칩n de aves end칠micas de M칠xico con diversos colores y tama침os",
                    description: "Exhibici칩n que alberga diversas especies de aves nativas de M칠xico, incluyendo quetzales, tucanes, chachalacas, carpinteros y colibr칤es. La colecci칩n destaca la rica biodiversidad aviar del pa칤s y la importancia de su conservaci칩n frente a amenazas como la p칠rdida de h치bitat y el tr치fico ilegal."
                },
                { 
                    id: 17, 
                    name: "Embarcadero", 
                    icon: "游뚺", 
                    x: 650, y: 420,
                    species: "",
                    scientificName: "",
                    habitat: "Lago artificial",
                    diet: "",
                    lifespan: "",
                    conservationStatus: "",
                    characteristics: "Muelle de madera con botes disponibles para alquiler",
                    description: "Estructura que permite a los visitantes alquilar botes de remos o pedales para navegar por el lago central del parque. Ofrece una perspectiva 칰nica para observar la fauna acu치tica y las aves que habitan en el lago y sus alrededores."
                },
                { 
                    id: 18, 
                    name: "Tigre", 
                    icon: "游낸", 
                    x: 680, y: 450,
                    species: "DE BENGALA",
                    scientificName: "Panthera tigris tigris",
                    habitat: "Selvas, manglares y praderas de la India y Bangladesh",
                    diet: "Carn칤voro (ungulados, ciervos, jabal칤es)",
                    lifespan: "10-15 a침os en estado salvaje",
                    conservationStatus: "En peligro (EN)",
                    characteristics: "Pelaje naranja con rayas negras, patr칩n 칰nico en cada individuo, peso de 180-260 kg en machos",
                    description: "El tigre de Bengala es la subespecie m치s numerosa de tigre. Cada individuo tiene un patr칩n 칰nico de rayas que act칰a como huella digital. Son excelentes nadadores y cazadores solitarios, principalmente activos al amanecer y al anochecer. La p칠rdida de h치bitat y la caza furtiva son sus principales amenazas."
                },
                { 
                    id: 19, 
                    name: "Le칩n", 
                    icon: "游부", 
                    x: 710, y: 420,
                    species: "AFRICANO",
                    scientificName: "Panthera leo",
                    habitat: "Sabanas y praderas africanas",
                    diet: "Carn칤voro (ungulados medianos y grandes)",
                    lifespan: "10-14 a침os en estado salvaje",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Machos con melena distintiva, cuerpo musculoso, color amarillo-dorado",
                    description: "El le칩n es el 칰nico felino verdaderamente social, viviendo en grupos llamados manadas. Los machos se distinguen por su melena que puede variar de color desde el rubio hasta el negro. Las hembras son las principales cazadoras, mientras que los machos defienden el territorio y la manada."
                },
                { 
                    id: 20, 
                    name: "Pepl칩n", 
                    icon: "游", 
                    x: 150, y: 300,
                    species: "SAGRADO",
                    scientificName: "Papio hamadryas",
                    habitat: "Sabanas y zonas rocosas del noreste de 츼frica",
                    diet: "Omn칤voro (frutas, semillas, insectos, peque침os vertebrados)",
                    lifespan: "25-30 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Dimorfismo sexual marcado, machos con melena plateada y hembras m치s peque침as de color marr칩n",
                    description: "El papi칩n sagrado o hamadryas es un babuino con un marcado dimorfismo sexual. Los machos tienen una melena distintiva de color plateado y son considerablemente m치s grandes que las hembras. Viven en complejos sistemas sociales con m칰ltiples niveles de organizaci칩n. Fueron venerados en el antiguo Egipto."
                },
                { 
                    id: 21, 
                    name: "Leopardo", 
                    icon: "游낹", 
                    x: 180, y: 320,
                    species: "Panthera pardus",
                    scientificName: "Panthera pardus",
                    habitat: "Sabanas, bosques y monta침as de 츼frica y Asia",
                    diet: "Carn칤voro (ungulados, primates, roedores)",
                    lifespan: "12-17 a침os en estado salvaje",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Pelaje amarillo con manchas negras en roseta, cuerpo musculoso y flexible",
                    description: "Felino 치gil y poderoso, conocido por su capacidad para trepar 치rboles y llevar presas varias veces su peso a las ramas. Su patr칩n de manchas le proporciona un excelente camuflaje. Es principalmente solitario y territorial, cazando mediante emboscadas. Es el m치s adaptable de los grandes felinos."
                },
                { 
                    id: 22, 
                    name: "Cocodrilo", 
                    icon: "游낽", 
                    x: 210, y: 280,
                    species: "Crocodylus acutus",
                    scientificName: "Crocodylus acutus",
                    habitat: "R칤os, estuarios y costas de Am칠rica",
                    diet: "Carn칤voro (peces, aves, mam칤feros)",
                    lifespan: "70-80 a침os",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Hocico largo y estrecho, dientes visibles con la boca cerrada, color gris-verdoso",
                    description: "El cocodrilo americano es una especie de gran tama침o que puede alcanzar los 5-6 metros de longitud. Tiene una mordida extremadamente poderosa. Puede permanecer sumergido hasta 2 horas y sobrevivir meses sin comer. Las hembras son madres dedicadas que protegen a sus cr칤as durante varios meses."
                },
                { 
                    id: 23, 
                    name: "Mono", 
                    icon: "游", 
                    x: 240, y: 320,
                    species: "ARA칌A",
                    scientificName: "Ateles geoffroyi",
                    habitat: "Selvas tropicales de Am칠rica Central y del Sur",
                    diet: "Frug칤voro (principalmente frutas, tambi칠n hojas y flores)",
                    lifespan: "20-25 a침os",
                    conservationStatus: "En peligro (EN)",
                    characteristics: "Extremidades largas, cola prensil que funciona como quinta extremidad, cuerpo delgado",
                    description: "El mono ara침a debe su nombre a sus extremidades largas y delgadas. Su cola prensil es tan fuerte que puede soportar todo el peso de su cuerpo. Son excelentes acr칩batas que se desplazan balance치ndose entre los 치rboles. Viven en grupos sociales y son importantes dispersores de semillas en su ecosistema."
                },
                { 
                    id: 24, 
                    name: "Lemur", 
                    icon: "游", 
                    x: 270, y: 280,
                    species: "COLA ANILLADA",
                    scientificName: "Lemur catta",
                    habitat: "Bosques secos y espinosos de Madagascar",
                    diet: "Omn칤voro (frutas, hojas, insectos)",
                    lifespan: "16-19 a침os",
                    conservationStatus: "En peligro (EN)",
                    characteristics: "Cola larga con anillos blancos y negros, cara con m치scara negra, peso de 2.5-3.5 kg",
                    description: "El l칠mur de cola anillada es un primate end칠mico de Madagascar, reconocible por su cola larga con anillos blancos y negros. Son animales sociales que viven en grupos matriarcales. Utilizan su cola para comunicarse y mantener el equilibrio. Su caracter칤stica postura de 'adoraci칩n al sol' les ayuda a calentarse por las ma침anas."
                },
                { 
                    id: 25, 
                    name: "Aviario", 
                    icon: "游붚", 
                    x: 300, y: 320,
                    species: "",
                    scientificName: "Varias especies",
                    habitat: "Recinto cerrado con malla",
                    diet: "Var칤a seg칰n especies",
                    lifespan: "Var칤a seg칰n especies",
                    conservationStatus: "Var칤a seg칰n especies",
                    characteristics: "Gran jaula donde las aves pueden volar libremente mientras los visitantes caminan por su interior",
                    description: "Espacio cerrado con malla donde habitan diversas especies de aves en un entorno que simula su h치bitat natural. Los visitantes pueden caminar por senderos dentro del aviario, observando a las aves volar libremente a su alrededor. Incluye especies tropicales, acu치ticas y de bosque."
                },
                { 
                    id: 26, 
                    name: "Mapache", 
                    icon: "游붛", 
                    x: 330, y: 280,
                    species: "Procyon lotor",
                    scientificName: "Procyon lotor",
                    habitat: "Bosques cercanos a cursos de agua",
                    diet: "Omn칤voro (frutas, nueces, insectos, peque침os vertebrados)",
                    lifespan: "2-3 a침os en estado salvaje",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "M치scara facial negra, cola anillada, manos muy sensibles",
                    description: "Mam칤fero nocturno con distintiva m치scara facial y cola anillada. Tiene manos extremadamente sensibles y h치biles que utiliza para 'lavar' su comida antes de comerla. Es altamente adaptable y ha prosperado en entornos urbanos. Su inteligencia y destreza manual le permiten resolver problemas complejos."
                },
                { 
                    id: 27, 
                    name: "Martucha", 
                    icon: "游", 
                    x: 360, y: 320,
                    species: "Potos flavus",
                    scientificName: "Potos flavus",
                    habitat: "Selvas tropicales de Am칠rica Central y del Sur",
                    diet: "Omn칤voro (frutas, n칠ctar, insectos, peque침os vertebrados)",
                    lifespan: "20-25 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Cola prensil, pelaje dorado-marr칩n, ojos grandes adaptados a la visi칩n nocturna",
                    description: "Tambi칠n conocida como kinkaj칰, la martucha es un mam칤fero arbor칤cola y nocturno relacionado con los mapaches. Tiene una cola prensil que usa como quinta extremidad para moverse entre los 치rboles. Su lengua larga y delgada est치 adaptada para alimentarse de n칠ctar y miel, actuando como polinizador de algunas plantas."
                },
                { 
                    id: 28, 
                    name: "Le칩n", 
                    icon: "游부", 
                    x: 390, y: 280,
                    species: "AFRICANO",
                    scientificName: "Panthera leo",
                    habitat: "Sabanas y praderas africanas",
                    diet: "Carn칤voro (ungulados medianos y grandes)",
                    lifespan: "10-14 a침os en estado salvaje",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Machos con melena distintiva, cuerpo musculoso, color amarillo-dorado",
                    description: "El le칩n es el 칰nico felino verdaderamente social, viviendo en grupos llamados manadas. Los machos se distinguen por su melena que puede variar de color desde el rubio hasta el negro. Las hembras son las principales cazadoras, mientras que los machos defienden el territorio y la manada."
                },
                { 
                    id: 29, 
                    name: "Le칩n", 
                    icon: "游부", 
                    x: 420, y: 320,
                    species: "AFRICANO",
                    scientificName: "Panthera leo",
                    habitat: "Sabanas y praderas africanas",
                    diet: "Carn칤voro (ungulados medianos y grandes)",
                    lifespan: "10-14 a침os en estado salvaje",
                    conservationStatus: "Vulnerable (VU)",
                    characteristics: "Machos con melena distintiva, cuerpo musculoso, color amarillo-dorado",
                    description: "El le칩n es el 칰nico felino verdaderamente social, viviendo en grupos llamados manadas. Los machos se distinguen por su melena que puede variar de color desde el rubio hasta el negro. Las hembras son las principales cazadoras, mientras que los machos defienden el territorio y la manada."
                },
                { 
                    id: 30, 
                    name: "Oso Negro", 
                    icon: "游냩", 
                    x: 450, y: 280,
                    species: "AMERICANO",
                    scientificName: "Ursus americanus",
                    habitat: "Bosques de Norteam칠rica",
                    diet: "Omn칤voro (bayas, nueces, insectos, peces, peque침os mam칤feros)",
                    lifespan: "20-30 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje negro (aunque puede variar a marr칩n o canela), hocico alargado, orejas redondeadas",
                    description: "A pesar de su nombre, el oso negro americano puede presentar diferentes coloraciones. Es m치s peque침o que el oso pardo y excelente trepador de 치rboles. Hiberna durante el invierno en regiones fr칤as. Tiene un excelente sentido del olfato, hasta 7 veces mejor que el de un perro."
                },
                { 
                    id: 31, 
                    name: "Guanaco", 
                    icon: "游붗", 
                    x: 480, y: 320,
                    species: "Lama guanicoe",
                    scientificName: "Lama guanicoe",
                    habitat: "Altiplanos y estepas de Sudam칠rica",
                    diet: "Herb칤voro (pastos, arbustos)",
                    lifespan: "20-25 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje lanudo de color marr칩n rojizo, cuello largo, orejas puntiagudas",
                    description: "El guanaco es un cam칠lido sudamericano, ancestro salvaje de la llama dom칠stica. Est치 adaptado a ambientes 치ridos y de gran altitud. Vive en grupos familiares liderados por un macho dominante. Cuando se siente amenazado, puede correr a velocidades de hasta 56 km/h y escupir una mezcla de saliva y contenido estomacal."
                },
                { 
                    id: 32, 
                    name: "Ciervo", 
                    icon: "游붋", 
                    x: 510, y: 280,
                    species: "SIKA",
                    scientificName: "Cervus nippon",
                    habitat: "Bosques templados y subtropicales de Asia Oriental",
                    diet: "Herb칤voro (hierbas, hojas, cortezas)",
                    lifespan: "15-18 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje moteado en verano, astas ramificadas en machos, mancha blanca en el trasero",
                    description: "El ciervo sika es originario de Asia Oriental. Su nombre 'sika' significa 'ciervo' en japon칠s. Mantiene su pelaje moteado en verano, pero se vuelve m치s oscuro y uniforme en invierno. Los machos emiten un silbido caracter칤stico durante la 칠poca de apareamiento y desarrollan astas que mudan anualmente."
                },
                { 
                    id: 33, 
                    name: "Bisonte", 
                    icon: "游붧", 
                    x: 540, y: 320,
                    species: "AMERICANO",
                    scientificName: "Bison bison",
                    habitat: "Praderas y llanuras de Norteam칠rica",
                    diet: "Herb칤voro (pastos)",
                    lifespan: "15-20 a침os",
                    conservationStatus: "Casi amenazado (NT)",
                    characteristics: "Cabeza y parte delantera masivas, joroba pronunciada, cuernos cortos y curvados",
                    description: "El bisonte americano es el mam칤fero terrestre m치s grande de Norteam칠rica. Fue llevado casi a la extinci칩n en el siglo XIX, pero los esfuerzos de conservaci칩n han permitido su recuperaci칩n. A pesar de su gran tama침o, puede correr a velocidades de hasta 55 km/h y saltar obst치culos de 1.8 metros de altura."
                },
                { 
                    id: 34, 
                    name: "Carabao", 
                    icon: "游낶", 
                    x: 570, y: 280,
                    species: "Bubalus bubalis",
                    scientificName: "Bubalus bubalis",
                    habitat: "Pantanos y humedales del Sudeste Asi치tico",
                    diet: "Herb칤voro (hierbas acu치ticas, pastos)",
                    lifespan: "25-30 a침os",
                    conservationStatus: "No evaluado (NE) - Domesticado",
                    characteristics: "Cuernos grandes y curvados hacia atr치s, piel gris oscura, patas con 'calcetines' blancos",
                    description: "El carabao o b칰falo de agua es un bovino originario de Asia, ampliamente domesticado como animal de trabajo y producci칩n. Est치 adaptado a ambientes h칰medos y pantanosos, donde pasa gran parte del d칤a sumergido para regular su temperatura. Es un animal fuerte y resistente, capaz de trabajar en condiciones dif칤ciles."
                },
                { 
                    id: 35, 
                    name: "Mono", 
                    icon: "游", 
                    x: 600, y: 320,
                    species: "JAPON칄S",
                    scientificName: "Macaca fuscata",
                    habitat: "Bosques monta침osos de Jap칩n",
                    diet: "Omn칤voro (frutas, semillas, insectos, peque침os animales)",
                    lifespan: "25-30 a침os",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje denso gris-marr칩n, cara y trasero rojizos, cola corta",
                    description: "El macaco japon칠s o mono de las nieves es famoso por ba침arse en aguas termales durante el invierno. Es el primate no humano que vive m치s al norte. Tiene una estructura social compleja y ha desarrollado tradiciones culturales como lavar alimentos antes de comerlos, comportamiento que se transmite de generaci칩n en generaci칩n."
                },
                { 
                    id: 36, 
                    name: "Lobo", 
                    icon: "游냨", 
                    x: 630, y: 280,
                    species: "CANADIENSE",
                    scientificName: "Canis lupus occidentalis",
                    habitat: "Bosques boreales y tundra de Norteam칠rica",
                    diet: "Carn칤voro (ungulados, castores, liebres)",
                    lifespan: "7-8 a침os en estado salvaje",
                    conservationStatus: "Preocupaci칩n menor (LC)",
                    characteristics: "Pelaje espeso gris-blanco, patas largas, orejas triangulares",
                    description: "El lobo canadiense es una de las subespecies m치s grandes de lobo gris. Vive en manadas con una estructura social jer치rquica compleja. Es un cazador cooperativo con excelente resistencia, capaz de recorrer grandes distancias. Su aullido, que puede escucharse hasta 10 km de distancia, sirve para comunicarse con otros miembros de la manada."
                },
                { 
                    id: 37, 
                    name: "Acuario", 
                    icon: "游", 
                    x: 660, y: 320,
                    species: "",
                    scientificName: "Varias especies",
                    habitat: "Ecosistemas acu치ticos recreados",
                    diet: "Var칤a seg칰n especies",
                    lifespan: "Var칤a seg칰n especies",
                    conservationStatus: "Var칤a seg칰n especies",
                    characteristics: "Exhibici칩n con tanques que recrean diversos ecosistemas acu치ticos",
                    description: "Instalaci칩n que alberga diversas especies acu치ticas en ambientes controlados que recrean sus h치bitats naturales. Incluye peces tropicales, corales, crust치ceos y otras formas de vida acu치tica de diferentes regiones del mundo. Cuenta con un t칰nel submarino que permite a los visitantes observar a los animales desde una perspectiva 칰nica."
                }
            ];

            // Definir 치reas principales del parque (basado en la imagen)
            const parkAreas = [
                { 
                    name: "Lago Central", 
                    type: "agua", 
                    path: [
                        { x: 400, y: 350 },
                        { x: 450, y: 300 },
                        { x: 500, y: 350 },
                        { x: 450, y: 400 }
                    ],
                    color: "#b3e5fc"
                },
                { 
                    name: "츼rea Circular", 
                    type: "recreacion", 
                    center: { x: 200, y: 200 },
                    radius: 80,
                    color: "#c8e6c9"
                },
                { 
                    name: "Jard칤n Bot치nico", 
                    type: "naturaleza", 
                    path: [
                        { x: 600, y: 200 },
                        { x: 650, y: 250 },
                        { x: 600, y: 300 },
                        { x: 550, y: 250 }
                    ],
                    color: "#dcedc8"
                }
            ];

            // Definir caminos principales (basado en la imagen)
            const mainPaths = [
                // Camino central horizontal
                { points: [
                    { x: 100, y: 350 },
                    { x: 700, y: 350 }
                ]},
                // Camino vertical izquierdo
                { points: [
                    { x: 200, y: 100 },
                    { x: 200, y: 500 }
                ]},
                // Camino vertical derecho
                { points: [
                    { x: 600, y: 100 },
                    { x: 600, y: 500 }
                ]},
                // Camino circular
                { isCircle: true, center: { x: 200, y: 200 }, radius: 100 },
                // Caminos adicionales
                { points: [
                    { x: 300, y: 200 },
                    { x: 500, y: 200 }
                ]},
                { points: [
                    { x: 300, y: 400 },
                    { x: 500, y: 400 }
                ]}
            ];

            // Crear leyenda
            function createLegend() {
                const types = [
                    { type: "acceso", color: "#e53935", label: "Accesos" },
                    { type: "servicio", color: "#607d8b", label: "Servicios" },
                    { type: "animal", color: "#8bc34a", label: "Animales" },
                    { type: "recreacion", color: "#43a047", label: "Recreaci칩n" },
                    { type: "naturaleza", color: "#8bc34a", label: "Naturaleza" },
                    { type: "agua", color: "#1e88e5", label: "Agua" }
                ];

                types.forEach(item => {
                    const legendItem = document.createElement('div');
                    legendItem.className = 'legend-item';
                    legendItem.innerHTML = `
                        <div class="legend-color" style="background-color: ${item.color}"></div>
                        <span>${item.label}</span>
                    `;
                    legendItems.appendChild(legendItem);
                });
            }

            // Llenar listas de instalaciones y animales
            function populateLists() {
                // Llenar lista de instalaciones (SOLO INSTALACIONES, NO ANIMALES)
                parkFacilities.forEach(facility => {
                    const li = document.createElement('li');
                    li.setAttribute('data-id', facility.id);
                    li.innerHTML = `
                        <span class="number">${facility.id}</span>
                        <span class="name">${facility.name}</span>
                    `;
                    li.addEventListener('click', () => {
                        showFacilityInfo(facility);
                        document.querySelector('[data-tab="mapa"]').click();
                    });
                    facilitiesList.appendChild(li);
                });

                // Llenar grid de animales
                parkAnimals.forEach(animal => {
                    const card = document.createElement('div');
                    card.className = 'animal-card';
                    card.setAttribute('data-id', animal.id);
                    
                    // Crear contenido detallado para la tarjeta del animal
                    card.innerHTML = `
                        <div class="animal-number">${animal.id}</div>
                        <div class="animal-header">
                            <div class="animal-icon">${animal.icon}</div>
                            <div class="animal-info">
                                <h3>${animal.name}</h3>
                                <p><em>${animal.scientificName}</em></p>
                                <p><strong>Especie:</strong> ${animal.species}</p>
                            </div>
                        </div>
                        <p>${animal.description}</p>
                        <div class="animal-details">
                            <span class="animal-detail">H치bitat: ${animal.habitat}</span>
                            <span class="animal-detail">Dieta: ${animal.diet}</span>
                            <span class="animal-detail">Vida: ${animal.lifespan}</span>
                        </div>
                        <div class="conservation-status">
                            <strong>Estado de conservaci칩n:</strong> ${animal.conservationStatus}
                        </div>
                        <div class="animal-detail" style="margin-top: 0.5rem; display: block;">
                            <strong>Caracter칤sticas:</strong> ${animal.characteristics}
                        </div>
                    `;
                    
                    card.addEventListener('click', () => {
                        showAnimalInfo(animal);
                        document.querySelector('[data-tab="mapa"]').click();
                    });
                    animalsGrid.appendChild(card);
                });
            }

            // Funci칩n de b칰squeda para instalaciones
            document.getElementById('facilitySearch').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                document.querySelectorAll('.facilities-list li').forEach(item => {
                    const facilityName = item.querySelector('.name').textContent.toLowerCase();
                    if (facilityName.includes(searchTerm)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });

            // Funci칩n de b칰squeda para animales
            document.getElementById('animalSearch').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                document.querySelectorAll('.animal-card').forEach(card => {
                    const animalName = card.querySelector('h3').textContent.toLowerCase();
                    const animalDescription = card.querySelector('p').textContent.toLowerCase();
                    if (animalName.includes(searchTerm) || animalDescription.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            // Dibujar el mapa
            function drawMap() {
                // Limpiar el canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Dibujar fondo verde claro para representar el c칠sped
                ctx.fillStyle = '#c8e6c9';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Dibujar caminos principales
                ctx.strokeStyle = '#e0e0e0';
                ctx.lineWidth = 15;
                
                mainPaths.forEach(path => {
                    if (path.isCircle) {
                        // Dibujar camino circular
                        ctx.beginPath();
                        ctx.arc(path.center.x, path.center.y, path.radius, 0, Math.PI * 2);
                        ctx.stroke();
                    } else {
                        // Dibujar camino recto
                        ctx.beginPath();
                        ctx.moveTo(path.points[0].x, path.points[0].y);
                        
                        for (let i = 1; i < path.points.length; i++) {
                            ctx.lineTo(path.points[i].x, path.points[i].y);
                        }
                        
                        ctx.stroke();
                    }
                });
                
                // Dibujar 치reas principales
                parkAreas.forEach(area => {
                    ctx.fillStyle = area.color;
                    
                    if (area.radius) {
                        // 츼rea circular
                        ctx.beginPath();
                        ctx.arc(area.center.x, area.center.y, area.radius, 0, Math.PI * 2);
                        ctx.fill();
                    } else if (area.path) {
                        // 츼rea con forma personalizada
                        ctx.beginPath();
                        ctx.moveTo(area.path[0].x, area.path[0].y);
                        for (let i = 1; i < area.path.length; i++) {
                            ctx.lineTo(area.path[i].x, area.path[i].y);
                        }
                        ctx.closePath();
                        ctx.fill();
                    }
                });
                
                // Dibujar 치rboles (puntos verdes peque침os)
                ctx.fillStyle = '#66bb6a';
                const treePositions = [
                    {x: 120, y: 150}, {x: 180, y: 120}, {x: 250, y: 180}, {x: 150, y: 250},
                    {x: 220, y: 280}, {x: 280, y: 220}, {x: 320, y: 150}, {x: 380, y: 180},
                    {x: 420, y: 220}, {x: 480, y: 150}, {x: 520, y: 180}, {x: 580, y: 220},
                    {x: 620, y: 150}, {x: 680, y: 180}, {x: 150, y: 380}, {x: 220, y: 420},
                    {x: 280, y: 480}, {x: 320, y: 420}, {x: 380, y: 480}, {x: 420, y: 420},
                    {x: 480, y: 480}, {x: 520, y: 420}, {x: 580, y: 480}, {x: 620, y: 420},
                    {x: 680, y: 480}
                ];
                
                treePositions.forEach(pos => {
                    const size = Math.random() * 5 + 5;
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, size, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                // Dibujar instalaciones
                parkFacilities.forEach(facility => {
                    // Dibujar c칤rculo para la instalaci칩n
                    ctx.beginPath();
                    ctx.arc(facility.x, facility.y, facility.radius, 0, Math.PI * 2);
                    ctx.fillStyle = facility.color;
                    ctx.fill();
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // Dibujar letra de la instalaci칩n
                    ctx.fillStyle = '#fff';
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(facility.id, facility.x, facility.y);
                });
                
                // Dibujar animales
                parkAnimals.forEach(animal => {
                    // Dibujar c칤rculo para el animal
                    ctx.beginPath();
                    ctx.arc(animal.x, animal.y, 15, 0, Math.PI * 2);
                    ctx.fillStyle = '#8bc34a';
                    ctx.fill();
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // Dibujar n칰mero del animal
                    ctx.fillStyle = '#fff';
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(animal.id, animal.x, animal.y);
                });
                
                // Dibujar etiquetas para 치reas principales
                ctx.fillStyle = '#333';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                
                ctx.fillText("Lago Central", 450, 350);
                ctx.fillText("츼rea Circular", 200, 200);
                ctx.fillText("Jard칤n Bot치nico", 600, 250);
            }

            // Mostrar informaci칩n de la instalaci칩n
            function showFacilityInfo(facility) {
                infoPanel.innerHTML = `
                    <button class="close-btn">칑</button>
                    <h3>${facility.name}</h3>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Identificador:</strong> ${facility.id}
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Tipo:</strong> ${getTypeLabel(facility.type)}
                    </div>
                    <p style="margin-top: 1rem;">${facility.description}</p>
                    <div style="margin-top: 1rem; padding: 0.5rem; background-color: #e8f5e9; border-radius: 4px; font-size: 0.9rem;">
                        <strong>Nota:</strong> Haz clic en los puntos del mapa para ver m치s informaci칩n sobre cada zona.
                    </div>
                `;
                
                // Agregar funcionalidad al bot칩n de cerrar
                const closeBtn = infoPanel.querySelector('.close-btn');
                if (closeBtn) {
                    closeBtn.addEventListener('click', function() {
                        infoPanel.innerHTML = `
                            <h3>Informaci칩n</h3>
                            <p>Selecciona una zona del parque para ver detalles</p>
                        `;
                    });
                }
                
                // Resaltar elementos relacionados
                highlightRelatedItems(facility.id);
            }
            
            // Mostrar informaci칩n del animal
            function showAnimalInfo(animal) {
                infoPanel.innerHTML = `
                    <button class="close-btn">칑</button>
                    <h3>${animal.id}. ${animal.name}</h3>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>N칰mero:</strong> ${animal.id}
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Especie:</strong> ${animal.species}
                    </div>
                    <p style="margin-top: 1rem;">${animal.description}</p>
                    
                    <div class="info-grid">
                        <div class="info-box">
                            <h4>H치bitat</h4>
                            ${animal.habitat}
                        </div>
                        <div class="info-box">
                            <h4>Dieta</h4>
                            ${animal.diet}
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h4>Estado de conservaci칩n</h4>
                        <p>${animal.conservationStatus}</p>
                    </div>
                    
                    <div class="info-section">
                        <h4>Caracter칤sticas</h4>
                        <p>${animal.characteristics}</p>
                    </div>
                `;
                
                // Agregar funcionalidad al bot칩n de cerrar
                const closeBtn = infoPanel.querySelector('.close-btn');
                if (closeBtn) {
                    closeBtn.addEventListener('click', function() {
                        infoPanel.innerHTML = `
                            <h3>Informaci칩n</h3>
                            <p>Selecciona una zona del parque para ver detalles</p>
                        `;
                    });
                }
                
                // Resaltar elementos relacionados
                highlightRelatedItems(animal.id);
            }
            
            // Obtener etiqueta para el tipo de instalaci칩n
            function getTypeLabel(type) {
                const types = {
                    "acceso": "Acceso",
                    "servicio": "Servicio",
                    "animal": "Exhibici칩n de animal",
                    "recreacion": "츼rea recreativa",
                    "naturaleza": "츼rea natural",
                    "agua": "Cuerpo de agua"
                };
                
                return types[type] || type;
            }
            
            // Resaltar elementos relacionados
            function highlightRelatedItems(id) {
                // Resaltar en la lista de instalaciones
                document.querySelectorAll('.facilities-list li').forEach(item => {
                    item.classList.remove('highlight');
                    if (item.getAttribute('data-id') === id.toString()) {
                        item.classList.add('highlight');
                    }
                });
                
                // Resaltar en la lista de animales
                document.querySelectorAll('.animal-card').forEach(card => {
                    card.classList.remove('highlight');
                    const animalId = parseInt(card.getAttribute('data-id'));
                    if (animalId === id) {
                        card.classList.add('highlight');
                    }
                });
            }

            // Detectar clic en el mapa
            canvas.addEventListener('click', function(event) {
                const rect = canvas.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                // Ajustar coordenadas seg칰n la escala del canvas
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                
                const clickX = x * scaleX;
                const clickY = y * scaleY;
                
                // Verificar si el clic fue en alguna instalaci칩n
                let found = false;
                
                // Primero verificar instalaciones
                for (const facility of parkFacilities) {
                    const distance = Math.sqrt(
                        Math.pow(clickX - facility.x, 2) + Math.pow(clickY - facility.y, 2)
                    );
                    
                    if (distance <= facility.radius) {
                        showFacilityInfo(facility);
                        found = true;
                        break;
                    }
                }
                
                // Si no se encontr칩 una instalaci칩n, verificar animales
                if (!found) {
                    for (const animal of parkAnimals) {
                        const distance = Math.sqrt(
                            Math.pow(clickX - animal.x, 2) + Math.pow(clickY - animal.y, 2)
                        );
                        
                        if (distance <= 15) { // Radio de los c칤rculos de animales
                            showAnimalInfo(animal);
                            found = true;
                            break;
                        }
                    }
                }
            });

            // Mostrar tooltip al pasar el mouse sobre los puntos
            let tooltip = null;
            
            canvas.addEventListener('mousemove', function(event) {
                const rect = canvas.getBoundingClientRect();
                const x = event.clientX - rect.left;
                const y = event.clientY - rect.top;
                
                // Ajustar coordenadas seg칰n la escala del canvas
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                
                const mouseX = x * scaleX;
                const mouseY = y * scaleY;
                
                let hoveredItem = null;
                let isAnimal = false;
                
                // Verificar si el mouse est치 sobre alguna instalaci칩n
                for (const facility of parkFacilities) {
                    const distance = Math.sqrt(
                        Math.pow(mouseX - facility.x, 2) + Math.pow(mouseY - facility.y, 2)
                    );
                    
                    if (distance <= facility.radius) {
                        hoveredItem = facility;
                        break;
                    }
                }
                
                // Si no est치 sobre una instalaci칩n, verificar animales
                if (!hoveredItem) {
                    for (const animal of parkAnimals) {
                        const distance = Math.sqrt(
                            Math.pow(mouseX - animal.x, 2) + Math.pow(mouseY - animal.y, 2)
                        );
                        
                        if (distance <= 15) { // Radio de los c칤rculos de animales
                            hoveredItem = animal;
                            isAnimal = true;
                            break;
                        }
                    }
                }
                
                // Mostrar u ocultar tooltip
                if (hoveredItem) {
                    if (!tooltip) {
                        tooltip = document.createElement('div');
                        tooltip.className = 'zone-tooltip';
                        document.body.appendChild(tooltip);
                    }
                    
                    if (isAnimal) {
                        tooltip.textContent = `${hoveredItem.id}. ${hoveredItem.name} ${hoveredItem.icon}`;
                    } else {
                        tooltip.textContent = `${hoveredItem.id}. ${hoveredItem.name}`;
                    }
                    
                    tooltip.style.left = `${event.clientX + 10}px`;
                    tooltip.style.top = `${event.clientY + 10}px`;
                    tooltip.style.display = 'block';
                    
                    canvas.style.cursor = 'pointer';
                } else {
                    if (tooltip) {
                        tooltip.style.display = 'none';
                    }
                    
                    canvas.style.cursor = 'default';
                }
            });
            
            canvas.addEventListener('mouseout', function() {
                if (tooltip) {
                    tooltip.style.display = 'none';
                }
            });

            // Inicializar
            createLegend();
            populateLists();
            drawMap();
        });
    </script>
</body>
</html>
